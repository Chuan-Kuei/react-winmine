!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["ReactWinmine.js"]=t(require("react")):e["ReactWinmine.js"]=t(e.React)}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(t,n){t.exports=e},function(e,t,n){e.exports=n(4)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(3))&&r.__esModule?r:{default:r};var o=function(e,t){if("throw"===t)throw new Error(e);return"warn"===t&&console.warn(e),null};t.default=function(e,t,n){var r=Object.keys(t),a=n||{},u=a.handleMissingStyleName,c=void 0===u?i.default.handleMissingStyleName:u,l=a.autoResolveMultipleImports,s=void 0===l?i.default.autoResolveMultipleImports:l;return e?e.split(" ").filter(function(e){return e}).map(function(e){if(function(e){return-1!==e.indexOf(".")}(e))return function(e,t,n){var r=e.split("."),a=r[0],u=r[1],c=n||i.default.handleMissingStyleName;return u?t[a]?t[a][u]?t[a][u]:o("CSS module does not exist: "+u,c):o("CSS module import does not exist: "+a,c):o("Invalid style name: "+e,c)}(e,t,c);if(0===r.length)throw new Error("Cannot use styleName attribute for style name '"+e+"' without importing at least one stylesheet.");if(r.length>1){if(!s)throw new Error("Cannot use anonymous style name '"+e+"' with more than one stylesheet import without setting 'autoResolveMultipleImports' to true.");return function(e,t,n){var r=n||i.default.handleMissingStyleName,a=Object.keys(t).map(function(n){return t[n][e]&&n}).filter(function(e){return e});if(a.length>1)throw new Error('Cannot resolve styleName "'+e+'" because it is present in multiple imports:\n\n\t'+a.join("\n\t")+'\n\nYou can resolve this by using a named import, e.g:\n\n\timport foo from "'+a[0]+'";\n\t<div styleName="foo.'+e+'" />\n\n');return 0===a.length?o("Could not resolve the styleName '"+e+"'.",r):t[a[0]][e]}(e,t,c)}var n=t[r[0]];return n[e]?n[e]:o("Could not resolve the styleName '"+e+"'.",c)}).filter(function(e){return e}).join(" "):""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={attributeNames:{styleName:"className"},generateScopedName:"[path]___[name]__[local]___[hash:base64:5]",handleMissingStyleName:"throw"};t.default=r},function(e,t,n){"use strict";var r=n(5);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){e.exports={container:"brick_container",broken:"brick_broken",flag:"brick_flag",mine:"brick_mine",wrong:"brick_wrong",wrong_mine:"brick_wrong_mine",zero:"brick_zero",one:"brick_one",two:"brick_two",three:"brick_three",four:"brick_four",five:"brick_five",six:"brick_six",seven:"brick_seven",eight:"brick_eight"}},function(e,t,n){e.exports={container:"statucBrick_container",smile:"statucBrick_smile",lost:"statucBrick_lost",winner:"statucBrick_winner"}},function(e,t,n){e.exports={container:"digitalSign_container",vertical:"digitalSign_vertical",horizontal:"digitalSign_horizontal","left-top":"digitalSign_left-top digitalSign_vertical",active:"digitalSign_active","left-bottom":"digitalSign_left-bottom digitalSign_vertical",top:"digitalSign_top digitalSign_horizontal","right-top":"digitalSign_right-top digitalSign_vertical","right-bottom":"digitalSign_right-bottom digitalSign_vertical",bottom:"digitalSign_bottom digitalSign_horizontal",middle:"digitalSign_middle digitalSign_horizontal"}},function(e,t,n){e.exports={container:"digitalNumber_container"}},function(e,t,n){e.exports={container:"digitalBoard_container"}},function(e,t,n){e.exports={"winmine-app-container":"winMine_winmine-app-container",brickContainer:"winMine_brickContainer",easy:"winMine_easy",medium:"winMine_medium",hard:"winMine_hard","winmine-header":"winMine_winmine-header"}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(0),a=n.n(o),u=n(1),c=n.n(u);function l(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function s(e){return function t(n){return 0===arguments.length||l(n)?t:e.apply(this,arguments)}}function f(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,o){return t.apply(this,arguments)};case 6:return function(e,n,r,i,o,a){return t.apply(this,arguments)};case 7:return function(e,n,r,i,o,a,u){return t.apply(this,arguments)};case 8:return function(e,n,r,i,o,a,u,c){return t.apply(this,arguments)};case 9:return function(e,n,r,i,o,a,u,c,l){return t.apply(this,arguments)};case 10:return function(e,n,r,i,o,a,u,c,l,s){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function p(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return l(n)?t:s(function(t){return e(n,t)});default:return l(n)&&l(r)?t:l(n)?s(function(t){return e(t,r)}):l(r)?s(function(t){return e(n,t)}):e(n,r)}}}var d=p(function(e,t){return 1===e?s(t):f(e,function e(t,n,r){return function(){for(var i=[],o=0,a=t,u=0;u<n.length||o<arguments.length;){var c;u<n.length&&(!l(n[u])||o>=arguments.length)?c=n[u]:(c=arguments[o],o+=1),i[u]=c,l(c)||(a-=1),u+=1}return a<=0?r.apply(this,i):f(a,e(t,i,r))}}(e,[],t))}),h=s(function(e){return d(e.length,e)});function m(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function g(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}function v(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var y="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},b=Object.prototype.toString,k=function(){return"[object Arguments]"===b.call(arguments)?function(e){return"[object Arguments]"===b.call(e)}:function(e){return v("callee",e)}}(),_=!{toString:null}.propertyIsEnumerable("toString"),w=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=function(){return arguments.propertyIsEnumerable("length")}(),M=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},O="function"!=typeof Object.keys||S?s(function(e){if(Object(e)!==e)return[];var t,n,r=[],i=S&&k(e);for(t in e)!v(t,e)||i&&"length"===t||(r[r.length]=t);if(_)for(n=w.length-1;n>=0;)v(t=w[n],e)&&!M(r,t)&&(r[r.length]=t),n-=1;return r}):s(function(e){return Object(e)!==e?[]:Object.keys(e)}),j=s(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function B(e,t,n,r){var i=m(e);function o(e,t){return A(e,t,n.slice(),r.slice())}return!g(function(e,t){return!g(o,t,e)},m(t),i)}function A(e,t,n,r){if(y(e,t))return!0;var i,o,a=j(e);if(a!==j(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(a){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(i=e.constructor,null==(o=String(i).match(/^function (\w*)/))?"":o[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!y(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!y(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var u=n.length-1;u>=0;){if(n[u]===e)return r[u]===t;u-=1}switch(a){case"Map":return e.size===t.size&&B(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&B(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=O(e);if(c.length!==O(t).length)return!1;var l=n.concat([e]),s=r.concat([t]);for(u=c.length-1;u>=0;){var f=c[u];if(!v(f,t)||!A(t[f],e[f],l,s))return!1;u-=1}return!0}var E=p(function(e,t){return A(e,t,[],[])});function P(e,t){return function(e,t,n){var r,i;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(r=1/t;n<e.length;){if(0===(i=e[n])&&1/i===r)return n;n+=1}return-1}if(t!=t){for(;n<e.length;){if("number"==typeof(i=e[n])&&i!=i)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(null===t)return e.indexOf(t,n)}for(;n<e.length;){if(E(e[n],t))return n;n+=1}return-1}(t,e,0)>=0}var x=s(function(e){return d(e.length,function(t,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=t,e.apply(this,r)})});var C=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function T(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!C(i)){for(var o=0;o<e.length;){if("function"==typeof i[e[o]])return i[e[o]].apply(i,r);o+=1}if(function(e){return null!=e&&"function"==typeof e["@@transducer/step"]}(i))return t.apply(null,r)(i)}return n.apply(this,arguments)}}var N=s(function(e){return!!C(e)||!!e&&("object"==typeof e&&(!function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))}),I=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();var R=p(function(e,t){return f(e.length,function(){return e.apply(t,arguments)})});function z(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function F(e,t,n,r){return e["@@transducer/result"](n[r](R(e["@@transducer/step"],e),t))}var q="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function D(e,t,n){if("function"==typeof e&&(e=function(e){return new I(e)}(e)),N(n))return function(e,t,n){for(var r=0,i=n.length;r<i;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return F(e,t,n,"fantasy-land/reduce");if(null!=n[q])return z(e,t,n[q]());if("function"==typeof n.next)return z(e,t,n);if("function"==typeof n.reduce)return F(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var U=function(){return this.xf["@@transducer/init"]()},W=function(e){return this.xf["@@transducer/result"](e)},Y=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=U,e.prototype["@@transducer/result"]=W,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}(),H=p(T(["filter"],p(function(e,t){return new Y(e,t)}),function(e,t){return n=t,"[object Object]"===Object.prototype.toString.call(n)?D(function(n,r){return e(t[r])&&(n[r]=t[r]),n},{},O(t)):function(e,t){for(var n=0,r=t.length,i=[];n<r;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}(e,t);var n})),L=p(function(e,t){return H((n=e,function(){return!n.apply(this,arguments)}),t);var n}),G=p(function(e,t){return L(x(P)(e),t)}),V=(n(6),{"./brick.css":{container:"brick_container",broken:"brick_broken",flag:"brick_flag",mine:"brick_mine",wrong:"brick_wrong",wrong_mine:"brick_wrong_mine",zero:"brick_zero",one:"brick_one",two:"brick_two",three:"brick_three",four:"brick_four",five:"brick_five",six:"brick_six",seven:"brick_seven",eight:"brick_eight"}}),X={"-2":"wrong_mine","-1":"mine",0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight"},J=function(e){var t=e.broken,n=e.marked,r=e.wrong,o=e.onClick,u=e.onContextMenu,c=e.value,l=["container"],s=-1===c||-2===c?"":c;if(t){var f=X[c]?X[c]:"";l.push(f),l.push("broken")}n&&l.push("flag"),r&&l.push("wrong");var p=l.join(" ");return a.a.createElement("div",{onClick:o,onContextMenu:u,className:i()(p,V)},t&&a.a.createElement("span",null,s))};J.defaultProps={broken:!1,marked:!1,wrong:!1},J.propTypes={broken:c.a.bool,marked:c.a.bool,wrong:c.a.bool,onClick:c.a.func,onContextMenu:c.a.func,value:c.a.number};var K=J,Q=(n(7),{"./statucBrick.css":{container:"statucBrick_container",smile:"statucBrick_smile",lost:"statucBrick_lost",winner:"statucBrick_winner"}}),Z=function(e){var t=e.status,n=e.onClick;return a.a.createElement("div",{onClick:n,onContextMenu:function(e){return e.preventDefault(),!1},className:i()("container ".concat(t),Q)})};Z.defaultProps={status:"smile"},Z.propTypes={status:c.a.oneOf(["smile","winner","lost"]),onClick:c.a.func};var $=Z,ee={EASY:"easy",MEDIUM:"medium",HARD:"hard"},te=(n(8),{"./digitalSign.css":{container:"digitalSign_container",vertical:"digitalSign_vertical",horizontal:"digitalSign_horizontal","left-top":"digitalSign_left-top digitalSign_vertical",active:"digitalSign_active","left-bottom":"digitalSign_left-bottom digitalSign_vertical",top:"digitalSign_top digitalSign_horizontal","right-top":"digitalSign_right-top digitalSign_vertical","right-bottom":"digitalSign_right-bottom digitalSign_vertical",bottom:"digitalSign_bottom digitalSign_horizontal",middle:"digitalSign_middle digitalSign_horizontal"}}),ne=function(e){var t=e.position,n=e.active?"active":"";return a.a.createElement("div",{className:i()("container ".concat(t," ").concat(n),te)})};ne.defaultProps={active:!1},ne.propTypes={position:c.a.oneOf(["left-top","top","right-top","right-bottom","bottom","left-bottom","middle"]).isRequired,active:c.a.bool};var re=ne,ie=(n(9),{0:"1111110",1:"0011000",2:"0110111",3:"0111101",4:"1011001",5:"1101101",6:"1101111",7:"1111000",8:"1111111",9:"1111101"}),oe=["left-top","top","right-top","right-bottom","bottom","left-bottom","middle"],ae=function(e){var t=e.value,n=ie[t];return a.a.createElement("div",{className:"digitalNumber_container"},oe.map(function(e,t){var r=!!+n[t];return a.a.createElement(re,{key:e,position:e,active:r})}))};ae.defaultProps={value:0},ae.propTypes={value:c.a.number};var ue=ae,ce=(n(10),function(e){var t=e.value,n=Math.abs(t),r=n%10,i=~~(n/10%10),o=~~(n/100%10);return a.a.createElement("div",{className:"digitalBoard_container"},a.a.createElement(ue,{value:o}),a.a.createElement(ue,{value:i}),a.a.createElement(ue,{value:r}))});ce.defaultProps={value:0},ce.propTypes={value:c.a.number};var le,se=ce,fe=function(e){return void 0!==e&&-1!==e?e+1:e},pe=function(e,t,n){var r=function(e,t){return Array(e*t).fill(0)}(e,t),i=function(e,t,n){for(var r={},i=e*t;Object.keys(r).length<n;)r[~~(Math.random()*i)]=0;return Object.keys(r).map(function(e){return+e})}(e,t,n);return{mineMap:function(e,t,n){return t.reduce(function(t,r){var i=e.length,o=function(e,t){var n=e%t==0,r=(e+1)%t==0,i=["left","leftTop","leftBottom"],o=["right","rightTop","rightBottom"];return function(e){return n&&i.includes(e)||r&&o.includes(e)}}(r,n);t[r]=-1;var a={top:r-n,bottom:r+n,leftTop:r-n-1,left:r-1,leftBottom:r+n-1,rightTop:r-n+1,right:r+1,rightBottom:r+n+1};return Object.keys(a).filter(function(e){return!function(e,t){return t>=e||t<0}(i,a[e])}).filter(function(e){return!o(e)}).forEach(function(e){var n=a[e];t[n]=fe(t[n])}),t},e)}(r,i,e),minePosition:i}};n(11);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var he={"./winMine.css":{"winmine-app-container":"winMine_winmine-app-container",brickContainer:"winMine_brickContainer",easy:"winMine_easy",medium:"winMine_medium",hard:"winMine_hard","winmine-header":"winMine_winmine-header"}};function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ke(e,t,n[t])})}return e}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=(ke(le={},ee.EASY,{width:9,height:9,mine:10}),ke(le,ee.MEDIUM,{width:16,height:16,mine:40}),ke(le,ee.HARD,{width:30,height:16,mine:99}),le),we={time:0,width:9,height:9,mine:10,hundreds:0,tens:0,ones:0,gameStatus:"smile",minePosition:[],flagPosition:[],brokenCount:0,leftMine:10,timerTask:void 0},Se=function(e){function t(e){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=ve(t).call(this,e))||"object"!==de(i)&&"function"!=typeof i?ye(r):i;var o=e.level,a=_e[o],u=a.width,c=a.height,l=a.mine;return n.state=me({},we,{width:u,height:c,mine:l,leftMine:l}),n.timer=n.timer.bind(ye(n)),n.handleBrickBroken=n.handleBrickBroken.bind(ye(n)),n.handleClickMine=n.handleClickMine.bind(ye(n)),n.handleAddFlag=n.handleAddFlag.bind(ye(n)),n.handleReset=n.handleReset.bind(ye(n)),n.breakBrickAround=n.breakBrickAround.bind(ye(n)),n.addFlags=n.addFlags.bind(ye(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.state,t=e.width,n=e.height,r=e.mine,i=pe(t,n,r),o=i.mineMap,a=i.minePosition,u=setInterval(this.timer,1e3);this.setState({timerTask:u,minePosition:a,mineMap:this.setMineMapAction(o)})}},{key:"componentDidUpdate",value:function(e){var t=e.level,n=this.props.level;if(n!==t){var r=this.state.timerTask,i=_e[n],o=i.width,a=i.height,u=i.mine,c=pe(o,a,u),l=c.mineMap,s=c.minePosition;this.setState(me({},we,{minePosition:s,mineMap:this.setMineMapAction(l),width:o,height:a,mine:u,timerTask:r}))}}},{key:"componentWillUnmount",value:function(){var e=this.state.timerTask;e&&clearInterval(e)}},{key:"timer",value:function(){var e=this.state,t=e.time,n=(e.timerTask,t+1);this.setState({time:n,hundreds:~~(n/100%10),tens:~~(n/10%10),ones:n%10})}},{key:"setMineMapAction",value:function(e){var t=this;return e.reduce(function(e,n,r){var i=-1===n?t.handleClickMine:t.handleBrickBroken;return e[r]={isBroken:!1,isMarked:!1,wrong:!1,value:n,handleClick:h(i)(r),handleAddFlag:h(t.handleAddFlag)(r)},e},{})}},{key:"handleBrickBroken",value:function(e,t){var n=this,r=this.state,i=r.mineMap,o=r.gameStatus,a=r.brokenCount,u=r.minePosition,c=r.timerTask,l=i[e],s=(l.value,l.isMarked),f=l.isBroken;if(!s&&!f&&"lost"!==o){var p=this.breakBrickAround([],e);p.forEach(function(e){i[e]=me({},i[e],{isBroken:!0})});var d=this.isFinishGame(a+p.length);d&&clearInterval(c),this.setState({mineMap:i,brokenCount:a+p.length,gameStatus:d?"winner":o,timerTask:d?void 0:c},function(){d&&n.addFlags(u,i)})}}},{key:"isFinishGame",value:function(e){var t=this.state;t.brokenCount;return e+t.mine===t.width*t.height}},{key:"handleClickMine",value:function(e,t){var n=this.state,r=n.mineMap,i=n.minePosition,o=n.gameStatus,a=n.flagPosition,u=n.timerTask;r[e].isMarked||"lost"!==o&&(i.forEach(function(e){r[e].isMarked||(r[e]=me({},r[e],{isBroken:!0}))}),r[e]=me({},r[e],{isBroken:!0,wrong:!0}),G(i,a).forEach(function(e){r[e]=me({},r[e],{value:-2,isBroken:!0,isMarked:!1})}),clearInterval(u),this.setState({mineMap:r,timerTask:void 0,gameStatus:"lost"}))}},{key:"canBeBorken",value:function(e,t){var n=this.state.mineMap;return!(!n[t]||n[t]&&n[t].isBroken||n[t]&&n[t].isMarked||e.includes(t))}},{key:"breakBrickAround",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.state,i=r.width,o=r.mineMap;if(!this.canBeBorken(e,t))return e;if(e.push(t),0===o[t].value&&!o[t].isBroken||n){var a=(t+1)%i==0;t%i==0||(this.breakBrickAround(e,t-1),this.breakBrickAround(e,t-1+i),this.breakBrickAround(e,t-1-i)),a||(this.breakBrickAround(e,t+1),this.breakBrickAround(e,t+1+i),this.breakBrickAround(e,t+1-i)),this.breakBrickAround(e,t-i),this.breakBrickAround(e,t+i)}return e}},{key:"addFlags",value:function(e,t){var n=this.state.minePosition;e.forEach(function(e){t[e]=me({},t[e],{isMarked:!0})});var r=n.length-e.length;this.setState({mineMap:t,leftMine:r,flagPosition:e})}},{key:"handleAddFlag",value:function(e,t){t.preventDefault();var n=this.state,r=n.mineMap,i=n.flagPosition,o=n.minePosition,a=n.gameStatus,u=r[e],c=u.isBroken,l=u.isMarked,s=i.length,f=o.length;c||f===s&&!l||"smile"!==a||(r[e]=me({},r[e],{isMarked:!l}),l?i.splice(i.indexOf(e),1):i.push(e),this.addFlags(i,r))}},{key:"handleReset",value:function(){var e=this.state,t=e.timerTask,n=(e.leftMine,e.width),r=e.height,i=e.mine,o=pe(n,r,i),a=o.mineMap,u=o.minePosition;t||(t=setInterval(this.timer,1e3)),this.setState(me({},we,{timerTask:t,mineMap:this.setMineMapAction(a),leftMine:i,width:n,height:r,mine:i,minePosition:u,flagPosition:[]}))}},{key:"render",value:function(){var e=this.props.level,t=this.state,n=t.time,r=t.mineMap,o=t.gameStatus,u=t.leftMine;return a.a.createElement("div",{className:"winMine_winmine-app-container"},a.a.createElement("div",{className:"winMine_winmine-header"},a.a.createElement(se,{value:u}),a.a.createElement($,{onClick:this.handleReset,status:o}),a.a.createElement(se,{value:n})),a.a.createElement("div",{className:i()("brickContainer ".concat(e),he)},r&&Object.keys(r).map(function(e,t){var n=r[e],i=n.value,o=n.isBroken,u=n.isMarked,c=n.handleClick,l=n.wrong,s=n.handleAddFlag;return a.a.createElement(K,{key:e+t,value:i,broken:o,marked:u,onClick:c,wrong:l,onContextMenu:s})})))}}])&&ge(n.prototype,r),o&&ge(n,o),t}();Se.defaultProps={level:ee.EASY},Se.propTypes={level:c.a.oneOf([ee.EASY,ee.MEDIUM,ee.HARD])};var Me=Se;t.default=Me}])});